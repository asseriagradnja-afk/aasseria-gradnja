
gradjevinska-firma/
   index.php
   config.php
   /projekti/   (prazan folder za slike)
   /admin/
      login.php
      dashboard.php
      dodaj_projekt.php
      uredi_projekt.php
      obrisi_projekt.php
      logout.php
   baza.sql
CREATE DATABASE gradjevinska_firma;
USE gradjevinska_firma;

CREATE TABLE projekti (
  id INT AUTO_INCREMENT PRIMARY KEY,
  naziv VARCHAR(255) NOT NULL,
  opis TEXT NOT NULL,
  slika VARCHAR(255) NOT NULL
);

CREATE TABLE admini (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL,
  password VARCHAR(255) NOT NULL
);

-- admin / lozinka123
INSERT INTO admini (username, password) VALUES ('admin', MD5('lozinka123'));
<?php
$servername = "localhost";
$username = "root";   // promijeni ako koristi≈° drugi user
$password = "";       // lozinka za MySQL usera
$dbname = "gradjevinska_firma";

$conn = new mysqli($servername, $username, $password, $dbname);
if ($conn->connect_error) {
  die("Gre≈°ka spajanja: " . $conn->connect_error);
}
?>
<?php include 'config.php'; ?>
<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8">
  <title>Projekti - Graƒëevinska firma</title>
  <style>
    body { font-family: Arial, sans-serif; }
    h1 { text-align:center; margin:20px; }
    .projekti { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; max-width:1100px; margin:auto; }
    .projekt { background:#f4f4f4; border-radius:10px; overflow:hidden; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    .projekt img { width:100%; height:200px; object-fit:cover; }
    .info { padding:15px; }
    .info h3 { margin:0; color:#0066cc; }
  </style>
</head>
<body>
  <h1>Na≈°i projekti</h1>
  <div class="projekti">
    <?php
      $sql = "SELECT * FROM projekti ORDER BY id DESC";
      $result = $conn->query($sql);
      while($row = $result->fetch_assoc()) {
        echo "<div class='projekt'>
                <img src='projekti/{$row['slika']}' alt='{$row['naziv']}'>
                <div class='info'>
                  <h3>{$row['naziv']}</h3>
                  <p>{$row['opis']}</p>
                </div>
              </div>";
      }
    ?>
  </div>
</body>
</html>
<?php
session_start();
include '../config.php';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
  $username = $_POST['username'];
  $password = md5($_POST['password']); // MD5 za test (kasnije mo≈æe password_hash)

  $sql = "SELECT * FROM admini WHERE username='$username' AND password='$password'";
  $result = $conn->query($sql);

  if ($result->num_rows > 0) {
    $_SESSION['admin'] = $username;
    header("Location: dashboard.php");
    exit;
  } else {
    $error = "Pogre≈°no korisniƒçko ime ili lozinka!";
  }
}
?>
<h2>Prijava</h2>
<form method="post">
  <input type="text" name="username" placeholder="Korisniƒçko ime" required><br>
  <input type="password" name="password" placeholder="Lozinka" required><br>
  <button type="submit">Prijava</button>
</form>
<?php if(isset($error)) echo "<p style='color:red;'>$error</p>"; ?>
<?php
session_start();
if (!isset($_SESSION['admin'])) {
  header("Location: login.php");
  exit;
}
include '../config.php';
?>
<h1>Admin panel</h1>
<p>Dobrodo≈°ao, <?php echo $_SESSION['admin']; ?>!</p>
<a href="dodaj_projekt.php">‚ûï Dodaj novi projekt</a> | 
<a href="logout.php">üö™ Odjava</a>
<hr>

<h2>Lista projekata</h2>
<table border="1" cellpadding="10" cellspacing="0">
  <tr>
    <th>ID</th>
    <th>Naziv</th>
    <th>Slika</th>
    <th>Akcije</th>
  </tr>
  <?php
    $sql = "SELECT * FROM projekti ORDER BY id DESC";
    $result = $conn->query($sql);
    while($row = $result->fetch_assoc()) {
      echo "<tr>
              <td>{$row['id']}</td>
              <td>{$row['naziv']}</td>
              <td><img src='../projekti/{$row['slika']}' width='100'></td>
              <td>
                <a href='uredi_projekt.php?id={$row['id']}'>‚úèÔ∏è Uredi</a> | 
                <a href='obrisi_projekt.php?id={$row['id']}' onclick=\"return confirm('Jesi li siguran da ≈æeli≈° obrisati?');\">üóëÔ∏è Obri≈°i</a>
              </td>
            </tr>";
    }
  ?>
</table>
<?php
session_start();
if (!isset($_SESSION['admin'])) {
  header("Location: login.php");
  exit;
}
include '../config.php';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
  $naziv = $_POST['naziv'];
  $opis = $_POST['opis'];
  $slika = $_FILES['slika']['name'];

  move_uploaded_file($_FILES['slika']['tmp_name'], "../projekti/".$slika);

  $sql = "INSERT INTO projekti (naziv, opis, slika) VALUES ('$naziv','$opis','$slika')";
  if ($conn->query($sql)) {
    echo "‚úÖ Projekt dodan!";
  } else {
    echo "‚ùå Gre≈°ka: " . $conn->error;
  }
}
?>
<h2>Dodaj novi projekt</h2>
<form method="post" enctype="multipart/form-data">
  <input type="text" name="naziv" placeholder="Naziv projekta" required><br>
  <textarea name="opis" placeholder="Opis projekta" required></textarea><br>
  <input type="file" name="slika" required><br>
  <button type="submit">Dodaj</button>
</form>
<?php
session_start();
if (!isset($_SESSION['admin'])) {
  header("Location: login.php");
  exit;
}
include '../config.php';

$id = $_GET['id'];

// Dohvati podatke projekta
$sql = "SELECT * FROM projekti WHERE id=$id";
$result = $conn->query($sql);
$projekt = $result->fetch_assoc();

if ($_SERVER["REQUEST_METHOD"] == "POST") {
  $naziv = $_POST['naziv'];
  $opis = $_POST['opis'];

  if (!empty($_FILES['slika']['name'])) {
    $slika = $_FILES['slika']['name'];
    move_uploaded_file($_FILES['slika']['tmp_name'], "../projekti/".$slika);
    $sql = "UPDATE projekti SET naziv='$naziv', opis='$opis', slika='$slika' WHERE id=$id";
  } else {
    $sql = "UPDATE projekti SET naziv='$naziv', opis='$opis' WHERE id=$id";
  }

  if ($conn->query($sql)) {
    echo "‚úÖ Projekt a≈æuriran!";
    header("refresh:1;url=dashboard.php");
  } else {
    echo "‚ùå Gre≈°ka: " . $conn->error;
  }
}
?>

<h2>Uredi projekt</h2>
<form method="post" enctype="multipart/form-data">
  <input type="text" name="naziv" value="<?php echo $projekt['naziv']; ?>" required><br>
  <textarea name="opis" required><?php echo $projekt['opis']; ?></textarea><br>
  <img src="../projekti/<?php echo $projekt['slika']; ?>" width="150"><br>
  <input type="file" name="slika"><br>
  <button type="submit">Spremi promjene</button>
</form>
<?php
session_start();
if (!isset($_SESSION['admin'])) {
  header("Location: login.php");
  exit;
}
include '../config.php';

$id = $_GET['id'];

// Dohvati ime slike
$sql = "SELECT slika FROM projekti WHERE id=$id";
$result = $conn->query($sql);
$row = $result->fetch_assoc();
$slika = $row['slika'];

// Obri≈°i iz baze
$conn->query("DELETE FROM projekti WHERE id=$id");

// Obri≈°i sliku iz foldera
if (file_exists("../projekti/$slika")) {
  unlink("../projekti/$slika");
}

header("Location: dashboard.php");
exit;
?>
<?php
session_start();
session_destroy();
header("Location: login.php");
exit;
?>
