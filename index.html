<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asseria Gradnja j.d.o.o.</title>
  <style>
    body { font-family:sans-serif; margin:0; padding:0; background:#f4f4f4; color:#222 }
    header {
      min-height: 400px;
      background: url("naslovna.jpg") no-repeat center center/cover;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
    }
    header::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
    }
    header h1, header p { position: relative; z-index: 1; }
    nav { background:#c8102e; color:#fff; text-align:center; padding:.5rem }
    nav a { color:#fff; margin:0 1rem; text-decoration:none }
    section { padding:2rem; max-width:1000px; margin:auto }
    footer { background:#222; color:#fff; text-align:center; padding:1rem }
    img { max-width:100%; height:auto; }
    .admin-login,.admin-panel { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; padding:1rem; border:1px solid #ccc; border-radius:8px; z-index:1000; display:none; width:320px }
    .tabs{display:flex;gap:.5rem;margin-bottom:1rem}
    .tabs button{flex:1;padding:.5rem}
    .tab-content{display:none}
    .tab-content.active{display:block}
    input,textarea,button{width:100%;margin:.3rem 0;padding:.5rem}
    .btn{background:#c8102e;color:#fff;border:none;border-radius:5px;cursor:pointer}
  </style>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
</head>
<body>

<header id="hero">
  <h1 id="hero-title">Asseria Gradnja</h1>
  <p id="hero-sub">Uređenje enterijera i eksterijera • Ključ u ruke</p>
</header>

<nav>
  <a href="#onama">O nama</a>
  <a href="#usluge">Usluge</a>
  <a href="#galerija">Galerija</a>
  <a href="#kontakt">Kontakt</a>
</nav>

<section id="onama">
  <h2 id="about-title">O nama</h2>
  <p id="about-text">Specijalizirani smo za renoviranje kuće ili stana. Nudimo izgradnu niskogradnje sistemom ključ u ruke.</p>
</section>

<section id="usluge">
  <h2>Naše usluge</h2>
  <ul id="services"></ul>
</section>

<section id="galerija">
  <h2>Galerija</h2>
  <div id="gallery"></div>
</section>

<section id="kontakt">
  <h2>Kontakt</h2>
  <p>📞 <span id="contact-phone">+385 99 513 33773</span></p>
  <p>✉️ <span id="contact-email">info@asseriagradnja@gmail.com</span></p>
  <p>📍 <span id="contact-address">Benkovačko selo 122, 23420 Benkovac</span></p>
</section>

<footer>
  <p id="footer-text">© 2022 Asseria Gradnja</p>
  <button onclick="showLogin()" class="btn">🔑 Admin</button>
</footer>

<!-- Admin Login -->
<div class="admin-login" id="admin-login">
  <h3>Prijava</h3>
  <input type="email" id="loginUser" placeholder="Email">
  <input type="password" id="loginPass" placeholder="Lozinka">
  <button onclick="login()" class="btn">Login</button>
  <button onclick="hideLogin()" class="btn">Zatvori</button>
</div>

<!-- Admin Panel -->
<div class="admin-panel" id="admin-panel">
  <h3>Admin panel</h3>
  <div class="tabs">
    <button onclick="openTab('general')">Općenito</button>
    <button onclick="openTab('about')">O nama</button>
    <button onclick="openTab('services')">Usluge</button>
    <button onclick="openTab('gallery')">Galerija</button>
    <button onclick="openTab('contact')">Kontakt</button>
    <button onclick="openTab('footer')">Footer</button>
  </div>

  <div id="tab-general" class="tab-content">
    <h4>Hero naslov</h4><input id="heroTitleInput">
    <h4>Hero opis</h4><input id="heroSubInput">
    <button onclick="saveGeneral()" class="btn">Spremi</button>
  </div>

  <div id="tab-about" class="tab-content">
    <h4>O nama naslov</h4><input id="aboutTitleInput">
    <h4>O nama tekst</h4><textarea id="aboutTextInput"></textarea>
    <button onclick="saveAbout()" class="btn">Spremi</button>
  </div>

  <div id="tab-services" class="tab-content">
    <input id="svcName" placeholder="Naziv"><input id="svcDesc" placeholder="Opis">
    <button onclick="addService()" class="btn">Dodaj</button>
    <ul id="servicesAdmin"></ul>
  </div>

  <div id="tab-gallery" class="tab-content">
    <input type="file" id="galInput"><button onclick="addGallery()" class="btn">Dodaj</button>
    <div id="galleryAdmin"></div>
  </div>

  <div id="tab-contact" class="tab-content">
    <h4>Telefon</h4><input id="contactPhoneInput">
    <h4>Email</h4><input id="contactEmailInput">
    <h4>Adresa</h4><input id="contactAddressInput">
    <button onclick="saveContact()" class="btn">Spremi</button>
  </div>

  <div id="tab-footer" class="tab-content">
    <h4>Footer tekst</h4><input id="footerTextInput">
    <button onclick="saveFooter()" class="btn">Spremi</button>
  </div>

  <button onclick="hideAdmin()" class="btn">Zatvori</button>
</div>

<script>
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  const storage = firebase.storage();

  function showLogin(){ document.getElementById('admin-login').style.display='block'; }
  function hideLogin(){ document.getElementById('admin-login').style.display='none'; }
  function hideAdmin(){ document.getElementById('admin-panel').style.display='none'; }
  function openTab(t){ document.querySelectorAll('.tab-content').forEach(el=>el.classList.remove('active')); document.getElementById('tab-'+t).classList.add('active'); }

  function login(){
    const email=document.getElementById('loginUser').value;
    const pass=document.getElementById('loginPass').value;
    auth.signInWithEmailAndPassword(email,pass)
      .then(()=>{ document.getElementById('admin-login').style.display='none'; document.getElementById('admin-panel').style.display='block'; })
      .catch(err=>alert("Greška: "+err.message));
  }

  async function saveGeneral(){ await db.collection("content").doc("general").set({ heroTitle: heroTitleInput.value, heroSub: heroSubInput.value }); }
  async function saveAbout(){ await db.collection("content").doc("about").set({ title: aboutTitleInput.value, text: aboutTextInput.value }); }
  async function addService(){ await db.collection("services").add({ name: svcName.value, desc: svcDesc.value }); }
  async function addGallery(){ const file=galInput.files[0]; if(!file)return; const ref=storage.ref("gallery/"+file.name); await ref.put(file); const url=await ref.getDownloadURL(); await db.collection("gallery").add({ url }); }
  async function saveContact(){ await db.collection("content").doc("contact").set({ phone: contactPhoneInput.value, email: contactEmailInput.value, address: contactAddressInput.value }); }
  async function saveFooter(){ await db.collection("content").doc("footer").set({ text: footerTextInput.value }); }

  db.collection("content").doc("general").onSnapshot(doc=>{ if(doc.exists){ heroTitle.innerText=doc.data().heroTitle||""; heroSub.innerText=doc.data().heroSub||""; }});
  db.collection("content").doc("about").onSnapshot(doc=>{ if(doc.exists){ document.getElementById("about-title").innerText=doc.data().title||""; document.getElementById("about-text").innerText=doc.data().text||""; }});
  db.collection("services").onSnapshot(snap=>{ services.innerHTML=""; servicesAdmin.innerHTML=""; snap.forEach(doc=>{ services.innerHTML+=`<li>${doc.data().name} - ${doc.data().desc}</li>`; servicesAdmin.innerHTML+=`<li>${doc.data().name} - ${doc.data().desc}</li>`; }); });
  db.collection("gallery").onSnapshot(snap=>{ gallery.innerHTML=""; galleryAdmin.innerHTML=""; snap.forEach(doc=>{ gallery.innerHTML+=`<img src="${doc.data().url}" width="200">`; galleryAdmin.innerHTML+=`<img src="${doc.data().url}" width="80">`; }); });
  db.collection("content").doc("contact").onSnapshot(doc=>{ if(doc.exists){ contact-phone.innerText=doc.data().phone||""; contact-email.innerText=doc.data().email||""; contact-address.innerText=doc.data().address||""; }});
  db.collection("content").doc("footer").onSnapshot(doc=>{ if(doc.exists){ footer-text.innerText=doc.data().text||""; }});
</script>
</body>
</html>
